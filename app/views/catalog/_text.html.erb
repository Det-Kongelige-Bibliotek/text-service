<!--Retrieve the query-->
<% query_params = current_search_session.try(:query_params)%>
<% search_field = query_params[:search_field] %>

<%# If the search field is fritekst, get the last query and remove " %>
<%# If not, the the q parameter will be left empty and the render_snippet will not highlight the text %>
<% if search_field == "Alt" %>
    <% query_params = current_search_session.try(:query_params)
       query = query_params[:q] if  query_params.present?
       query = query.gsub!(/^\"|\"?$/, '') if query.present? %>
<% end %>
<article class="ocr">
<%= FileServer.render_snippet(@document['volume_id_ssi'],
                              {c: 'texts', xml_id: @document['xmlid_ssi'],
                               q: query}) %>
</article>